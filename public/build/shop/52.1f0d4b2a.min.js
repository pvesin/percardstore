"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[52],{6052:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n(9755),r=n.n(o),i=n(9730),a=n(3138);function c(t,e,n,o,r,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(o,r)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){c(i,o,r,a,l,"next",t)}function l(t){c(i,o,r,a,l,"throw",t)}a(void 0)}))}}const d=function(){var t=l((function*(t,e,n="",o=null){const r={};o&&(r.signal=o.signal);const i=yield fetch(window.location.origin+t+"?"+e+"="+n,r);return yield i.json()}));return function(e,n){return t.apply(this,arguments)}}(),u=function(){var t=l((function*(t,e=""){const n=yield fetch(window.location.origin+t+"?code[]="+e);return yield n.json()}));return function(e){return t.apply(this,arguments)}}();r().fn.extend({productVariantAutoComplete(){this.each(((t,e)=>{const n=r()(e),o=n.data("criteria-name"),c=n.find("input.autocomplete"),l=n.find("input.dropdown-toggle"),s=n.find("img.dropdown-image"),p=n.data("url"),v=n.data("load-edit-url"),f=n.find("div.dropdown-menu");let m;new a.Lt(n);l.length&&(c.val()&&u(v,c.val()).then((t=>{l.val(t[0].descriptor),s.attr("src",t[0].image)})),l[0].addEventListener("keydown",(0,i.Z)((()=>{f.empty(),m&&(m.abort(),m=null),m=new AbortController,d(p,o,l.val(),m).then((t=>{t.forEach((t=>{f.append(r()(`<div class="item cursor-pointer" data-value="${t.code}" data-slug="${t.slug}">\n                                    <img class="rounded-circle" style="width: 2.5rem;" src="${t.image}">\n                                    <span>${t.descriptor}</span>\n                                </div>`).on("click",(()=>{c.val(t.code),l.val(t.descriptor),s.attr("src",t.image)})))}))}))}),1e3)),l[0].addEventListener("click",(()=>{c.val()&&(c.removeAttr("value"),l.val(""),s.removeAttr("src"))})))}))}});const s=()=>{r()(".sylius-autocomplete.dropdown").productVariantAutoComplete(),p()},p=()=>{const t=document.querySelector("form div[data-form-collection='list']");if(!t)return;new MutationObserver((t=>{t.forEach((({target:t})=>{t=t.children.item(t.children.length-1);r()(t).find(".sylius-autocomplete.dropdown").productVariantAutoComplete()}))})).observe(t,{childList:!0})}},9730:(t,e,n)=>{n.d(e,{Z:()=>o});const o=(t,e)=>{let n=null;return(...o)=>{clearTimeout(n),n=setTimeout((()=>t(...o)),e)}}}}]);