"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[900],{4900:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(6945);var o=r(3138);function i(e,t,r,n,o,i,c){try{var a=e[i](c),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var c=e.apply(t,r);function a(e){i(c,n,o,a,l,"next",e)}function l(e){i(c,n,o,a,l,"throw",e)}a(void 0)}))}}const a=function(){var e=c((function*(e,t,r="",n=null){const o={};n&&(o.signal=n.signal);const i=yield fetch(window.location.origin+e+"?"+t+"="+r,o);return yield i.json()}));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=c((function*(e,t=""){const r=yield fetch(window.location.origin+e+"?code[]="+t);return yield r.json()}));return function(t){return e.apply(this,arguments)}}(),s=e=>{[...e].forEach((e=>{const t=e,r=t.dataset.criteriaName,i=t.querySelector("input.autocomplete"),c=t.querySelector("input.dropdown-toggle"),s=t.querySelector("img.dropdown-image"),u=t.dataset.url,d=t.dataset.loadEditUrl,v=t.querySelector("div.dropdown-menu");let p,m=null;new o.Lt(t);c&&(i.value&&l(d,i.value).then((e=>{c.value=e[0].descriptor,s.setAttribute("src",e[0].image),m={code:i.value,descriptor:e[0].descriptor,image:e[0].image}})),c.addEventListener("keydown",(0,n.Z)((()=>{v.innerHTML="",v.insertAdjacentHTML("beforeend","<span class='Loader d-block mx-auto'></span>"),p&&(p.abort(),p=null),p=new AbortController,a(u,r,c.value,p).then((e=>{v.innerHTML="",e.length?e.forEach((e=>{const t=document.createElement("div");t.classList.add("item","cursor-pointer"),t.setAttribute("data-value",e.code),t.setAttribute("data-slug",e.slug);const r=`<img class="rounded-circle" style="width: 2.5rem;" src="${e.image}">\n                                    <span>${e.descriptor}</span>`;t.insertAdjacentHTML("beforeend",r),t.addEventListener("click",(()=>{i.value=e.code,c.value=e.descriptor,s.setAttribute("src",e.image),m={code:e.code,descriptor:e.descriptor,image:e.image}})),v.append(t)})):v.inneHTML=Translator.trans("sylius.search.no_result")}))}),1e3)),c.addEventListener("click",(()=>{i.value&&(i.removeAttribute("value"),c.value="",s.removeAttribute("src"))})),((e,t)=>{document.addEventListener("click",(r=>{e.contains(r.target)||t()}))})(c,(()=>{m&&(i.value=m.code,c.value=m.descriptor,s.setAttribute("src",m.image))})))}))},u=()=>{const e=document.querySelectorAll(".sylius-autocomplete.dropdown");s(e),d()},d=()=>{const e=document.querySelector("form div[data-form-collection='list']");if(!e)return;new MutationObserver((e=>{e.forEach((({target:e})=>{if(e=e.children.item(e.children.length-1)){const t=e.querySelectorAll(".sylius-autocomplete.dropdown");s(t)}}))})).observe(e,{childList:!0})}},6945:(e,t,r)=>{r.d(t,{Z:()=>n});const n=(e,t)=>{let r=null;return(...n)=>{clearTimeout(r),r=setTimeout((()=>e(...n)),t)}}}}]);